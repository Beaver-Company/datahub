{% extends "layout.html" %}
{% block content %}
<script type="text/javascript">
  $(document).ready(function() {
    var files = $('#files').dataTable({
      "sDom": '<"top"f<"clear">>rt<"bottom"ilp<"clear">>',
      "bPaginate": false,
      "bFilter": true,
      "bInfo": false,
      "sWidth": "100%",
      "aoColumns": [                 
        {"bSortable": false},
        {"bSortable": false, "sWidth": "10em"},
      ]     
    });

    $('.dataTables_filter input').attr("placeholder", "filter by keyword tokens");
  });
</script>

<div id="content">
  <a class="blue bold" href=/browse/{{username}}>{{username}}</a> / <a class = "blue bold" href=/browse/{{username}}/{{repo}}>{{repo}}</a> /
  <hr class="light" />
  <form class="form-container" method="POST" action="/handle-file-upload" enctype='multipart/form-data'>
  <h3 style="padding-bottom:0.5em;">Create new table by uploading a file</h3>
  {% csrf_token %}
  <input type="hidden" name="username" value="{{username}}" />
  <input type="hidden" name="repo" value="{{repo}}" />
  <div id="error">
    {% for error in errors %}<span class="error">{% autoescape off %}{{error}}{% endautoescape %}</span><br />
        {% endfor %}
        <br />
    </div>
  <label for="data_file">Data File</label><br />
  <input type="file" name="data_file" placeholder="Data File"> <br /> <br />
  <input class="button" type="submit" value="Upload File"/>
  </form>
  <br />
  <br />
  <table id="files">
    <thead>
    <tr>
      <th>Files</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    {% for file in files %}
    <tr>
      <td><a class="blue link" href="/download/{{username}}/{{repo}}?file={{file}}">{{file}}</a></td>
      <td><a class="database-table-icon" href="/import/{{username}}/{{repo}}?file={{file}}" title="Import to DataHub as Table"></a> &nbsp; <a class="download-icon" href="/download/{{username}}/{{repo}}?file={{file}}" title="Download"></a> &nbsp; <a class="delete-icon" href="/delete/{{username}}/{{repo}}?file={{file}}" title="Delete"></a></td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}





