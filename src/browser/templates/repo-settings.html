{% extends "layout.html" %}
{% block content %}
<div class="container">
  <h4 class="inline-block">
    <a class="link" href="/browse/{{repo_base}}">{{repo_base}}</a>
    /
    <a class="link" href="/browse/{{repo_base}}/{{repo}}">{{repo}}</a>
    /
  </h4>
  <hr />
  <p class="lead">Manage Repository Settings</p>
  <table>

    <tr>
      <td class="cell-left">
        Repository:
      </td>
      <td class="cell-right">          
        <strong>{{repo_base}}/{{repo}}</strong>
      </td>
    </tr>

    <tr>
      <td class="cell-left">
        Owner:
      </td>
      <td class="cell-right">          
        <strong>{{repo_base}}</strong>
      </td>
    </tr>
    <tr>
      <td class="cell-left">
        Collaborators:
      </td>
      <td class="cell-right">
        {% if collaborators|length > 0 %}
          {% for collaborator in collaborators %}
            <span class="label label-default">{{collaborator}}</span> &nbsp; &nbsp; <a href="/collaborator/repo/{{repo_base}}/{{repo}}/remove/{{collaborator}}" title="Remove"><span class="glyphicon glyphicon-remove"></span></a></li>
            <br />
          {% endfor %}
          <br />
        {% endif %}
        <form class="form-inline" role="form" method="POST" action="/collaborator/repo/{{repo_base}}/{{repo}}/add">
          <div class="form-group">
            {% csrf_token %}
            <input type="text" class="form-control" name="collaborator_username" id="collaborator_username" placeholder="Username" />
            <input type="hidden" class="form-control" name="privileges" value="SELECT" />
            <input type="hidden" class="form-control" name="privileges" value="UPDATE" />
            <input type="hidden" class="form-control" name="privileges" value="INSERT" />
          </div>
          <button class="btn btn-primary btn-xsm" id="add_collaborator" type="submit">Add</button>
        </form>
      </td>
    </tr>
    
    {% if repo_is_public %}
      <tr>
      <td class="cell-left">
      </td>
      <td class="cell-right">
        <p>This repository is currently viewable by anyone.</p>
        <form class="form-inline" role="form" method="POST" action="/collaborator/repo/{{repo_base}}/{{repo}}/remove/{{ public_role }}">
          <div class="form-group">
            {% csrf_token %}
            <input type="hidden" class="form-control" name="collaborator_username" id="collaborator_username" value="{{ public_role }}" />
          </div>
          <button class="btn btn-primary btn-xsm" id="add_collaborator" title="This will restrict access to your repo to you and designated collaborators">Revoke Public Access</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr>
      <td class="cell-left">
      </td>
      <td class="cell-right">
        <p>This repository is currently restricted to you and to designated collaborators.</p>
        <form class="form-inline" role="form" method="POST" action="/collaborator/repo/{{repo_base}}/{{repo}}/add">
          <div class="form-group">
            {% csrf_token %}
            <input type="hidden" class="form-control" name="collaborator_username" id="collaborator_username" value="{{ public_role }}" />
            <input type="hidden" class="form-control" name="privileges" value="SELECT" />
          </div>
          <button class="btn btn-primary btn-xsm" id="add_collaborator" title="This will make the repo viewable by anyone, including people whom have not logged into datahub.">Make Repo Public</button>
        </form>
      </td>
    </tr>
    {% endif %}

  </table>
  <br />
  <br />
</div>
{% endblock %}


